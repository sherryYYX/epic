(this.webpackJsonpepic=this.webpackJsonpepic||[]).push([[3],{103:function(e,t,n){},12:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(14),o=n.n(r),i=n(159);o.a.init({appId:"PAYusTE6FYP70BdiF2GPRs8L-gzGzoHsz",appKey:"DUjbnKEqG7rS87eikdL8Bj7T",serverURL:"https://payuste6.lc-cn-n1-shared.com"});var a={register:function(e,t){var n=new r.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){console.log("\u6ce8\u518c\u6210\u529f"),e(t)}),(function(e){t(e)}))}))},login:function(e,t){return console.log("------"),console.log(e,t),new Promise((function(n,o){r.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return o(e)}))}))},logout:function(){r.User.logOut(),i.a.error("\u9000\u51fa\u767b\u9646")},getCurrentUser:function(){return r.User.current()}},c={add:function(e,t){var n=new o.a.Object("Image"),r=new o.a.File(t,e);return n.set("fileName",t),n.set("owner",o.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,a=new o.a.Query("Image");return a.include("owner"),a.limit(i),a.skip(n*i),a.descending("createAt"),a.equalTo("owner",o.a.User.current()),new Promise((function(e,t){a.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}}},158:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(8),a=n.n(i),c=(n(103),n(21)),u=n(29),s=n(3),l=n(22),p=n(160),f=n(64),b=n(67);function m(){var e=Object(c.a)(["\n  margin-left:10px;\n"]);return m=function(){return e},e}function y(){var e=Object(c.a)(["\n  margin-left:auto;\n  color:#fff;\n  font-size: 16px;\n"]);return y=function(){return e},e}function g(){var e=Object(c.a)(["\ncolor:#fff;\nmargin-left:30px;\n\n&.active{\nborder-bottom:1px solid #fff;\n}\n"]);return g=function(){return e},e}function h(){var e=Object(c.a)(["\nbackground-color:#02101f;\npadding:10px 100px;\ndisplay:flex;\nalign-item:center;\ncolor:fff;\n"]);return h=function(){return e},e}var O=l.a.header(h()),j=Object(l.a)(u.b)(g()),d=l.a.div(y()),v=Object(l.a)(p.a)(m()),w=Object(b.a)((function(){var e=Object(s.f)(),t=Object(f.a)(),n=t.UserStore,i=t.AuthStore;return Object(r.useEffect)((function(){n.pullUser()}),[]),o.a.createElement(O,null,o.a.createElement("nav",null,o.a.createElement(j,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),o.a.createElement(j,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(j,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u6211")),o.a.createElement(d,null,n.currentUser?o.a.createElement(o.a.Fragment,null,n.currentUser.attributes.username," ",o.a.createElement(v,{type:"primary",onClick:function(){i.logout()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u9646\u9875\u9762"),e.push("/login")}},"\u767b\u9646"),o.a.createElement(v,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")}},"\u6ce8\u518c"))))}));function U(){var e=Object(c.a)(["\npadding:10px 100px;\ntext-align: center;\nfont-size:12px;\ncolor:#aaa;\n"]);return U=function(){return e},e}var E=l.a.footer(U());var P=function(){return o.a.createElement(E,null,o.a.createElement("p",null,"Footer"))};var k=function(){return o.a.createElement("div",null,"loading")};console.log(k);var z=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(10)]).then(n.bind(null,340))})),F=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(9)]).then(n.bind(null,341))})),L=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,332))})),x=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,333))})),D=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,334))}));var S=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(w,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(k,null)},o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/",exact:!0,component:z}),o.a.createElement(s.a,{path:"/history",component:F}),o.a.createElement(s.a,{path:"/about",component:L}),o.a.createElement(s.a,{path:"/login",component:x}),o.a.createElement(s.a,{path:"/register",component:D})))),o.a.createElement(P,null))};n(157),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(12);a.a.render(o.a.createElement(u.a,null,o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r,o,i,a,c,u,s,l,p,f,b,m,y,g,h,O=n(0),j=n(7),d=n(17),v=n(18),w=n(2),U=(n(42),n(1)),E=n(12),P=new(r=function(){function e(){Object(d.a)(this,e),Object(j.a)(this,"currentUser",o,this)}return Object(v.a)(e,[{key:"pullUser",value:function(){this.currentUser=E.a.getCurrentUser()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),o=Object(w.a)(r.prototype,"currentUser",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(w.a)(r.prototype,"pullUser",[U.f],Object.getOwnPropertyDescriptor(r.prototype,"pullUser"),r.prototype),Object(w.a)(r.prototype,"resetUser",[U.f],Object.getOwnPropertyDescriptor(r.prototype,"resetUser"),r.prototype),r),k=n(159),z=new(i=function(){function e(){Object(d.a)(this,e),Object(j.a)(this,"List",a,this),Object(j.a)(this,"isLoading",c,this),Object(j.a)(this,"hasMore",u,this),Object(j.a)(this,"page",s,this),this.limit=10}return Object(v.a)(e,[{key:"append",value:function(e){this.List=this.List.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,E.b.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){k.a.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.List=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),a=Object(w.a)(i.prototype,"List",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(w.a)(i.prototype,"isLoading",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(w.a)(i.prototype,"hasMore",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s=Object(w.a)(i.prototype,"page",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(w.a)(i.prototype,"append",[U.f],Object.getOwnPropertyDescriptor(i.prototype,"append"),i.prototype),Object(w.a)(i.prototype,"find",[U.f],Object.getOwnPropertyDescriptor(i.prototype,"find"),i.prototype),Object(w.a)(i.prototype,"reset",[U.f],Object.getOwnPropertyDescriptor(i.prototype,"reset"),i.prototype),i),F=new(l=function(){function e(){Object(d.a)(this,e),Object(j.a)(this,"fileName",p,this),Object(j.a)(this,"file",f,this),Object(j.a)(this,"isUploading",b,this),Object(j.a)(this,"serveFile",m,this)}return Object(v.a)(e,[{key:"setFileName",value:function(e){this.fileName=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serveFile=null,new Promise((function(t,n){E.b.add(e.file,e.fileName).then((function(n){e.serveFile=n,t(n)})).catch((function(e){k.a.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serveFile=!1}}]),e}(),p=Object(w.a)(l.prototype,"fileName",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=Object(w.a)(l.prototype,"file",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(w.a)(l.prototype,"isUploading",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(w.a)(l.prototype,"serveFile",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(w.a)(l.prototype,"setFileName",[U.f],Object.getOwnPropertyDescriptor(l.prototype,"setFileName"),l.prototype),Object(w.a)(l.prototype,"setFile",[U.f],Object.getOwnPropertyDescriptor(l.prototype,"setFile"),l.prototype),Object(w.a)(l.prototype,"upload",[U.f],Object.getOwnPropertyDescriptor(l.prototype,"upload"),l.prototype),Object(w.a)(l.prototype,"reset",[U.f],Object.getOwnPropertyDescriptor(l.prototype,"reset"),l.prototype),l),L=new(y=function(){function e(){Object(d.a)(this,e),Object(j.a)(this,"isLogin",g,this),Object(j.a)(this,"values",h,this)}return Object(v.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return this.isLogin=!1,new Promise((function(t,n){E.a.login(e.values.username,e.values.password).then((function(n){P.pullUser(),e.isLogin=!0,k.a.success("\u767b\u9646\u6210\u529f"),t(n)})).catch((function(t){P.resetUser(),k.a.error("\u767b\u9646\u5931\u8d25"),e.isLogin=!1,n(t)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){E.a.register(e.values.username,e.values.password).then((function(e){P.pullUser(),t(e),k.a.success("\u6ce8\u518c\u6210\u529f")})).catch((function(e){P.resetUser(),k.a.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){E.a.logout(),P.resetUser(),z.reset(),F.reset()}}]),e}(),g=Object(w.a)(y.prototype,"isLogin",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Object(w.a)(y.prototype,"values",[U.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(w.a)(y.prototype,"setUsername",[U.f],Object.getOwnPropertyDescriptor(y.prototype,"setUsername"),y.prototype),Object(w.a)(y.prototype,"setPassword",[U.f],Object.getOwnPropertyDescriptor(y.prototype,"setPassword"),y.prototype),Object(w.a)(y.prototype,"login",[U.f],Object.getOwnPropertyDescriptor(y.prototype,"login"),y.prototype),Object(w.a)(y.prototype,"register",[U.f],Object.getOwnPropertyDescriptor(y.prototype,"register"),y.prototype),Object(w.a)(y.prototype,"logout",[U.f],Object.getOwnPropertyDescriptor(y.prototype,"logout"),y.prototype),y),x=Object(O.createContext)({AuthStore:L,UserStore:P,ImageStore:F,HistoryStore:z});window.stores={AuthStore:L,UserStore:P,ImageStore:F,HistoryStore:z};var D=function(){return Object(O.useContext)(x)}},98:function(e,t,n){e.exports=n(158)}},[[98,4,5]]]);
//# sourceMappingURL=main.13756458.chunk.js.map